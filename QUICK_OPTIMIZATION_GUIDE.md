# ‚ö° –ö–†–ê–¢–ö–ê–Ø –°–ü–†–ê–í–ö–ê –ü–û –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò

## üéØ –í –ß–Å–ú –ë–´–õ–ê –ü–†–û–ë–õ–ï–ú–ê?

–í–æ—Ä–∫–µ—Ä –∏ –±–æ—Ç –∏–Ω–æ–≥–¥–∞ **"–∑–∞—Å—ã–ø–∞–ª–∏"** –∏–∑-–∑–∞:
1. üî¥ **–ë–ª–æ–∫–∏—Ä—É—é—â–∏—Ö –≤—ã–∑–æ–≤–æ–≤ Redis** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—á–µ—Ä–µ–¥–∏ –∑–∞–Ω–∏–º–∞–ª–∞ 1 —Å–µ–∫ –∑–∞ —Ä–∞–∑
2. üî¥ **–û—Ç—Å—É—Ç—Å—Ç–≤–∏—è timeout** - ComfyUI –º–æ–≥ –∑–∞–≤–∏—Å–Ω—É—Ç—å –Ω–∞ 10+ –º–∏–Ω—É—Ç
3. üî¥ **–£—Ç–µ—á–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π** - –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å —Å–æ–∑–¥–∞–≤–∞–ª –Ω–æ–≤–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–∏—Å—Ç–µ–º–∞ "–≤–∏—Å–Ω–µ—Ç" –Ω–∞ 5-15 –º–∏–Ω—É—Ç, –Ω—É–∂–Ω–æ —Ç—ã–∫–∞—Ç—å –≤ –æ–∫–Ω–æ –≤–æ—Ä–∫–µ—Ä–∞, —á—Ç–æ–±—ã "—Ä–∞–∑–±—É–¥–∏—Ç—å"

---

## ‚úÖ –ß–¢–û –ò–°–ü–†–ê–í–õ–ï–ù–û?

### 7 –æ—Å–Ω–æ–≤–Ω—ã—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π:
1. ‚úÖ **Redis polling** - –≤–º–µ—Å—Ç–æ `brpop()` —Ç–µ–ø–µ—Ä—å `rpop()` —Å exponential backoff
2. ‚úÖ **Timeout protection** - –∑–∞–¥–∞—á–∏ –Ω–µ –≤–∏—Å—è—Ç –±–æ–ª–µ–µ 5 –º–∏–Ω—É—Ç
3. ‚úÖ **Connection pooling** - HTTP –∑–∞–ø—Ä–æ—Å—ã –≤ 3-5x –±—ã—Å—Ç—Ä–µ–µ
4. ‚úÖ **Re-queue if busy** - –∑–∞–¥–∞—á–∏ –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ –Ω–µ—Ö–≤–∞—Ç–∫–µ GPU
5. ‚úÖ **Exponential backoff** - –º–µ–Ω—å—à–µ "—Ö–æ–ª–æ—Å—Ç–æ–≥–æ" CPU
6. ‚úÖ **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã** - 20-30% –±—ã—Å—Ç—Ä–µ–µ –≤ —Ü–µ–ª–æ–º
7. ‚úÖ **Graceful shutdown** - —á–∏—Å—Ç–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

---

## üöÄ –ö–ê–ö –ü–†–ò–ú–ï–ù–ò–¢–¨?

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
# –ó–∞–∫—Ä—ã—Ç—å —Ç–µ–∫—É—â–∏–µ –æ–∫–Ω–∞ –≤–æ—Ä–∫–µ—Ä–∞ –∏ –±–æ—Ç–∞ (Ctrl+C)

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –≤–æ—Ä–∫–µ—Ä –≤ –Ω–æ–≤–æ–º –æ–∫–Ω–µ
python -m worker.run

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –±–æ—Ç–∞ –≤ –¥—Ä—É–≥–æ–º –æ–∫–Ω–µ
python -m bot.run

# –ì–æ—Ç–æ–≤–æ! –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ï—Å–ª–∏ –Ω–∞–¥–æ —á—Ç–æ-—Ç–æ –ø–æ–º–µ–Ω—è—Ç—å
```bash
# –û—Ç–∫—Ä—ã—Ç—å .env –∏ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
# –ó–∞—Ç–µ–º –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞–∫ –≤ –í–∞—Ä–∏–∞–Ω—Ç–µ 1
```

---

## üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´

| –ß—Ç–æ —É–ª—É—á—à–∏–ª–æ—Å—å | –ë—ã–ª–æ | –°—Ç–∞–ª–æ |
|----------------|------|-------|
| –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏ | 2 —Å–µ–∫ | 0.1-1 —Å–µ–∫ |
| HTTP –∑–∞–ø—Ä–æ—Å—ã | 100% | 20-30% (3-5x –±—ã—Å—Ç—Ä–µ–µ) |
| –ó–∞–≤–∏—Å–∞–Ω–∏—è | –ß–∞—Å—Ç—ã–µ | –†–µ–¥–∫–∏–µ/–Ω–µ—Ç |
| –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ | 200-400 MB | 150-200 MB (—Å—Ç–∞–±–∏–ª—å–Ω–æ) |
| –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU (idle) | –í—ã—Å–æ–∫–æ–µ | –ù–∏–∑–∫–æ–µ |

---

## ‚ö†Ô∏è –í–ê–ñ–ù–û

- ‚ùå –ù–µ —Ç—Ä–æ–≥–∞–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- ‚úÖ –ï—Å–ª–∏ —Å–∏—Å—Ç–µ–º–∞ –≤–∏—Å–Ω–µ—Ç - —Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏
- ‚úÖ –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–∂–¥–∏—Ç–µ—Å—å 10 –º–∏–Ω—É—Ç –æ—Ç–ª–∞–¥–∫–∏
- ‚úÖ –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö - —Å–º–æ—Ç—Ä–∏—Ç–µ `PERFORMANCE_OPTIMIZATION_GUIDE.md`

---

## üìù –ü–û–õ–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø

–î–ª—è –ø–æ–ª–Ω—ã—Ö –¥–µ—Ç–∞–ª–µ–π —Å–º–æ—Ç—Ä–∏—Ç–µ:
- üìÑ **OPTIMIZATION_REPORT.md** - –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç
- üìñ **PERFORMANCE_OPTIMIZATION_GUIDE.md** - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Å FAQ

---

**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é  
**–í—Ä–µ–º—è –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:** ~5 –º–∏–Ω—É—Ç (–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞)  
**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:** –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –±–µ–∑ –∑–∞–≤–∏—Å–∞–Ω–∏–π
